import{d as D,r as f,a as g,t as R,c as U,w as o,b as m,o as w,e as P,f as e,g as V,u as p,h as _,i as N,E as i}from"./index.abd753ed.js";import{j,r as q}from"./index.57234ca7.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const $={class:"card-header"},L=_("\u767B\u5F55"),M=_("\u6CE8\u518C"),S={key:0,class:"login"},T=_("\u767B\u5F55"),z={key:1,class:"register"},G=_("\u6CE8\u518C"),H=D({__name:"login",setup(J){const B=f({ruleForm:{username:"",password:""}}),t=f({username:"",password:"",resPassword:""}),n=g(!0);let x=N(),{ruleForm:l}=R(B),y=g(),v=g();const C=f({username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),b=()=>{n.value=!0},k=()=>{n.value=!1},E=async()=>{y.value.validate().then(()=>{j({username:l.value.username,password:l.value.password}).then(a=>{a.code==2e3?(localStorage.setItem("token",a.token),x.push("/home"),i.success(a.msg)):i.error(a.msg)})}).catch(()=>{console.log("catch")})},h=()=>{v.value.validate().then(()=>{t.password!=t.resPassword?i.error("\u786E\u8BA4\u5BC6\u7801\u548C\u5BC6\u7801\u4E0D\u76F8\u540C"):q({username:t.username,password:t.password}).then(a=>{a.code===2e3?(n.value=!0,i.success(a.msg)):i.error(a.msg)})})};return(a,s)=>{const c=m("el-button"),d=m("el-input"),u=m("el-form-item"),F=m("el-form"),A=m("el-card");return w(),U(A,{class:"box-card"},{header:o(()=>[P("div",$,[e(c,{type:n.value?"primary":"",text:"",onClick:b},{default:o(()=>[L]),_:1},8,["type"]),e(c,{type:n.value?"":"primary",text:"",onClick:k},{default:o(()=>[M]),_:1},8,["type"])])]),default:o(()=>[n.value?(w(),V("div",S,[e(F,{model:p(l),"status-icon":"",rules:C,ref_key:"ruleFormRef",ref:y,"label-position":"left",class:"loginForm"},{default:o(()=>[e(u,{prop:"username"},{default:o(()=>[e(d,{type:"text",modelValue:p(l).username,"onUpdate:modelValue":s[0]||(s[0]=r=>p(l).username=r),autocomplete:"off",placeholder:"\u8D26\u53F7"},null,8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:o(()=>[e(d,{type:"password",modelValue:p(l).password,"onUpdate:modelValue":s[1]||(s[1]=r=>p(l).password=r),autocomplete:"off",placeholder:"\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(u,{class:"btn-primary"},{default:o(()=>[e(c,{type:"primary",onClick:s[2]||(s[2]=r=>E())},{default:o(()=>[T]),_:1})]),_:1})]),_:1},8,["model","rules"])])):(w(),V("div",z,[e(F,{model:t,"status-icon":"",rules:C,ref_key:"registerFormRef",ref:v,"label-position":"left",class:"loginForm"},{default:o(()=>[e(u,{prop:"username"},{default:o(()=>[e(d,{type:"text",modelValue:t.username,"onUpdate:modelValue":s[3]||(s[3]=r=>t.username=r),autocomplete:"off",placeholder:"\u8D26\u53F7"},null,8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:o(()=>[e(d,{type:"password",modelValue:t.password,"onUpdate:modelValue":s[4]||(s[4]=r=>t.password=r),autocomplete:"off",placeholder:"\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:o(()=>[e(d,{type:"password",modelValue:t.resPassword,"onUpdate:modelValue":s[5]||(s[5]=r=>t.resPassword=r),autocomplete:"off",placeholder:"\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e(u,{class:"btn-primary"},{default:o(()=>[e(c,{type:"primary",onClick:s[6]||(s[6]=r=>h())},{default:o(()=>[G]),_:1})]),_:1})]),_:1},8,["model","rules"])]))]),_:1})}}});const W=I(H,[["__scopeId","data-v-c2a1ba2d"]]);export{W as default};
